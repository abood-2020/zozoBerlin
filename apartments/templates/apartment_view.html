{% extends 'base.html' %}
{% load static %}

{% block seo_block %}
    <title>ZOZO | {{object.title}}</title>
    <meta name="description" content="{{object.title}}">
    <meta name="keywords" content="Berlin apartments, furnished rentals Berlin, short-term rentals, long-term accommodation Berlin, vacation rentals Berlin, ZOZO Berlin, apartment booking Berlin">

{% endblock %}

{% block content %}
    <div class="container">
        <nav class="breadcrumb-custom d-flex align-items-center">
            <i class="fa-solid fa-chevron-left px-2"></i>
            <a href="{% url 'main_page' %}">Home Page</a>
        </nav>
        <h5 class="main-title">{{object.title}}</h5>

            <div class="apartment-container">
                <div class="row">
                    <div class="col-md-9 col-sm-12">
                        <img src="{{object.main_image.url}}" alt="Apartment Photo" class="apartment-photo">
                    </div>
                    <div class="col-md-3 col-sm-12">
                        <div>
                            {% for image in images %}
                                <div class="w-100 mb-2">
                                    <img src="{{image.image.url}}"alt="Apartment Photo" class="small-image-apartment">
                                </div>
                            {% endfor %}
                        </div>
                    </div> 
                </div>
            </div>
            <div class="row align-items-baseline justify-content-around">
                <div class="col-md-9 col-sm-12">
                    <div class="">
                        <h5 class="main-title">{{object.location}}</h5>
                        <div class="fs-14 fw-normal text">
                            <span>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" focusable="false" width="18" height="18" color="var(--token-545afc82-d790-4647-bdd0-17dca164eab2, rgb(0, 0, 0))" style="user-select: none; fill: var(--token-545afc82-d790-4647-bdd0-17dca164eab2, rgb(0, 0, 0)); color: var(--token-545afc82-d790-4647-bdd0-17dca164eab2, rgb(0, 0, 0)); flex-shrink: 0;"><g color="var(--token-545afc82-d790-4647-bdd0-17dca164eab2, rgb(0, 0, 0))" weight="regular"><path d="M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"></path></g></svg>
                                1-{{object.max_guests}} Guests |&#160;&#160;&#160; </span> 
                            <span>
                                <i class="fas fa-bed"></i>
                                {{object.num_bedrooms}} Bedrooms |&#160;&#160;&#160;</span> 
                            <span>
                                {% if object.wifi_availability%}
                                    <i class="fas fa-wifi"></i> Wifi Free</span> 
                                {% else %}
                                    <i class="fas fa-wifi"></i> Wifi Unavailable</span> 
                                {% endif %}
                        </div>
                    </div> 
                </div>
                <div class="col-md-3 col-sm-12">
                    <div class="row align-items-center">
                        <div class="col">
                            <div style="font-size:16px">
                                <span class="fw-semibold" style="font-size:25px">{{object.price_per_night|floatformat:0}}$</span>
                                <span class="fw-normal text" style="font-size:14px">per night</span>
                                <div>
                                    <i class="fas fa-star checked"></i>
                                    <span class="fw-normal"> {{ average_rating|floatformat:1|default:"No ratings yet" }}</span>
                                    {% if total_reviews %}
                                        <span class="fw-normal text" style="font-size:14px">({{total_reviews}} Reviews)</span>
                                    {% endif %}
                                </div>

                            </div>
                        </div>
                        <div class="col">
                            <a href="{% url 'reservation_page' object.id %}" style="padding:13px 30px !important" class="btn btn-main">Book Now</a>
                        </div>
                    </dic>
                </div>
            </div>
            <div class="book-now-btn">
                <a href="{% url 'reservation_page' object.id %}" class="btn btn-main me-2">Book Now</a>
            </div>
        </div>
    </div>

        <!-- Gallery Image -->
        <section class="container-fluid apartment-slider py-5">
            <div class="container section-title">
                <h2 class="main-title">Apartment Gallery</h2>
            </div>
            <div class="owl-carousel owl-theme">
                {% for image in images %}
                <div class="item">
                    <div class="card">
                        <img src="{{image.image.url}}" class="card-img-top gallery-image" alt="Apartment 1">
                        <div class="card-body">
                            <h5 class="card-title">{{image.title}}</h5>
                            <p class="card-text">{{image.description}}</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
        <!-- End Gallery Images -->
        <!-- Detailes About Apartments -->
        <section class="container">
            <div class="container details-container">
                <div class="section-title">
                    <h2 class="main-title">What this place offers</h2>
                </div> 
                <div class="row justify-content-between">
                    <div class="col-md-5 col-sm-12">
                        <p class="fs-14">{{object.description}}</p>
                        <div class="mb-3">
                            <div class="details d-flex align-items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" aria-hidden="true" role="presentation" focusable="false" style="display: block; height: 24px; width: 24px; fill: currentcolor; margin-right:12px"><path d="M11.67 0v1.67h8.66V0h2v1.67h6a2 2 0 0 1 2 1.85v16.07a2 2 0 0 1-.46 1.28l-.12.13L21 29.75a2 2 0 0 1-1.24.58H6.67a5 5 0 0 1-5-4.78V3.67a2 2 0 0 1 1.85-2h6.15V0zm16.66 11.67H3.67v13.66a3 3 0 0 0 2.82 3h11.18v-5.66a5 5 0 0 1 4.78-5h5.88zm-.08 8h-5.58a3 3 0 0 0-3 2.82v5.76zm-18.58-16h-6v6h24.66v-6h-6v1.66h-2V3.67h-8.66v1.66h-2z"></path></svg>                                <div>
                                    <p class="fw-500">Free cancellation for 48 hours</p>
                            </div>
                        </div>
                    </div>
                    </div>
                    <div class="col-md-6 col-sm-12">
                        <div class="row">
                            {% for option in apartment_options %}
                            <div class="col-6 mb-3">
                                <div class="details d-flex align-items-center">
                                    <div style="margin-right:15px;">{{ option.icon_svg|safe }}</div>
                                    <div>
                                        {{option.name}}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}

        
                        </div>
                    </div>
                </div>
                
            </div>
        </section>
        <!-- End Details About Apartment-->
        <!-- start location Google GPS -->
        <section class="container">
            <div class="container">
                <div class="section-title">
                    <h2 class="main-title"></h2>
                    <div class="text">
                        <p>Located right in the heart of <br> the Swiss alps</p>
                    </div>
                </div> 
                <div class="row">
                    <div class="col-12">
                        <iframe 
                        src ="{{object.location_url}}"
                        width="100%" 
                        height="400" 
                        frameborder="0" 
                        style="border:0; border-radius:15px;" 
                        allowfullscreen="" 
                        aria-hidden="false" 
                        tabindex="0">
                    </iframe>     
                </div>
                </div>
            </div>
        </section>
        <!-- End Location Google GPS -->
        <div class="section-margin container customers-feedback">
            <div class="container">
                <div class="row">
                    <div class="col-md-4 col-sm-12">
                        <div class="section-title">
                            <h2 class="main-title ">What Our Guests Say</h2>
                        </div>            
                    </div>
                    <div class="col-md-8 col-sm-12">
                        <div class="row">
                        {% for rec in reviews %}
                            {% include 'includes/review_card.html' %}
                        {% endfor %}
                        <div>
                    </div>
                </div>
            </div>
        </div>
        <div class="section-margin container customers-feedback">
            <div class="container">
                <div class="">
                    <h2 class="main-title">Things to know</h2>
                </div> 
                <div class="row">
                    <div class="col-md-4 col-sm-12">
                        <h3 class="fs-18">House rules</h3>
                        <p>Check-in after {{ object.check_in_time|date:"H:i" }} </p>
                        <p>Checkout before {{ object.check_out_time|date:"H:i" }} </p>
                        <p>( 1 - {{object.max_guests}} ) guests maximum</p>
                    </div>
                    <div class="col-md-4 col-sm-12">
                        
                        <h3 class="fs-18">Safety & property</h3>
                        <p>{{object.house_rules}}</p>
                    </div>
                    {% comment %} <div class="col-md-4 col-sm-12">
                        <h3 class="fs-18">Cancellation policy</h3>
                        <p>Free cancellation for {{object.cancellation_hours}} hours. Cancel before 4 Nov for a partial refund.
                        </p>
                    </div> {% endcomment %}

                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block js_code %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap" async defer></script>

    <script>
        $(document).ready(function(){
            $('.owl-carousel').owlCarousel({
                loop:true,
                margin:20,
                nav:true,
                responsive:{
                    0:{
                        items:1
                    },
                    600:{
                        items:2
                    },
                    1000:{
                        items:3
                    }
                }
            });
        });
    </script>
    <script>
        function initMap() {
            const apartmentLocation = { lat: 40.730610, lng: -73.935242 }; // Example coordinates
            const map = new google.maps.Map(document.getElementById('map'), {
                zoom: 14,
                center: apartmentLocation
            });
            const marker = new google.maps.Marker({
                position: apartmentLocation,
                map: map
            });
        }
    
    </script>
    <script>
        // Show the "Book Now" button when scrolling
        window.onscroll = function() {
            var bookNowBtn = document.querySelector('.book-now-btn');
            if (document.documentElement.scrollTop > 100) {
                bookNowBtn.style.display = 'block';
            } else {
                bookNowBtn.style.display = 'none';
            }
        };
    </script>
    
{% endblock %}